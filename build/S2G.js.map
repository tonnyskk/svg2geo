{"version":3,"sources":["S2G.es6.js"],"names":[],"mappings":"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","file":"S2G.js","sourcesContent":["/*\r\n Copyright 2011-2013 Abdulla Abdurakhmanov\r\n Original sources are available at https://code.google.com/p/x2js/\r\n\r\n Licensed under the Apache License, Version 2.0 (the \"License\");\r\n you may not use this file except in compliance with the License.\r\n You may obtain a copy of the License at\r\n\r\n http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n Unless required by applicable law or agreed to in writing, software\r\n distributed under the License is distributed on an \"AS IS\" BASIS,\r\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n See the License for the specific language governing permissions and\r\n limitations under the License.\r\n */\r\n\r\n(function (root, factory) {\r\n     if (typeof define === \"function\" && define.amd) {\r\n         define([], factory);\r\n     } else if (typeof exports === \"object\") {\r\n         module.exports = factory();\r\n     } else {\r\n         root.X2JS = factory();\r\n     }\r\n }(window || self, function () {\r\n\treturn function (config) {\r\n\t\t'use strict';\r\n\r\n\t\tvar VERSION = \"1.2.0\";\r\n\r\n\t\tconfig = config || {};\r\n\t\tinitConfigDefaults();\r\n\t\tinitRequiredPolyfills();\r\n\r\n\t\tfunction initConfigDefaults() {\r\n\t\t\tif(config.escapeMode === undefined) {\r\n\t\t\t\tconfig.escapeMode = true;\r\n\t\t\t}\r\n\r\n\t\t\tconfig.attributePrefix = config.attributePrefix || \"_\";\r\n\t\t\tconfig.arrayAccessForm = config.arrayAccessForm || \"none\";\r\n\t\t\tconfig.emptyNodeForm = config.emptyNodeForm || \"text\";\r\n\r\n\t\t\tif(config.enableToStringFunc === undefined) {\r\n\t\t\t\tconfig.enableToStringFunc = true;\r\n\t\t\t}\r\n\t\t\tconfig.arrayAccessFormPaths = config.arrayAccessFormPaths || [];\r\n\t\t\tif(config.skipEmptyTextNodesForObj === undefined) {\r\n\t\t\t\tconfig.skipEmptyTextNodesForObj = true;\r\n\t\t\t}\r\n\t\t\tif(config.stripWhitespaces === undefined) {\r\n\t\t\t\tconfig.stripWhitespaces = true;\r\n\t\t\t}\r\n\t\t\tconfig.datetimeAccessFormPaths = config.datetimeAccessFormPaths || [];\r\n\r\n\t\t\tif(config.useDoubleQuotes === undefined) {\r\n\t\t\t\tconfig.useDoubleQuotes = false;\r\n\t\t\t}\r\n\r\n\t\t\tconfig.xmlElementsFilter = config.xmlElementsFilter || [];\r\n\t\t\tconfig.jsonPropertiesFilter = config.jsonPropertiesFilter || [];\r\n\r\n\t\t\tif(config.keepCData === undefined) {\r\n\t\t\t\tconfig.keepCData = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar DOMNodeTypes = {\r\n\t\t\tELEMENT_NODE \t   : 1,\r\n\t\t\tTEXT_NODE    \t   : 3,\r\n\t\t\tCDATA_SECTION_NODE : 4,\r\n\t\t\tCOMMENT_NODE\t   : 8,\r\n\t\t\tDOCUMENT_NODE \t   : 9\r\n\t\t};\r\n\r\n\t\tfunction initRequiredPolyfills() {\r\n\t\t}\r\n\r\n\t\tfunction getNodeLocalName( node ) {\r\n\t\t\tvar nodeLocalName = node.localName;\r\n\t\t\tif(nodeLocalName == null) // Yeah, this is IE!!\r\n\t\t\t\tnodeLocalName = node.baseName;\r\n\t\t\tif(nodeLocalName == null || nodeLocalName==\"\") // ==\"\" is IE too\r\n\t\t\t\tnodeLocalName = node.nodeName;\r\n\t\t\treturn nodeLocalName;\r\n\t\t}\r\n\r\n\t\tfunction getNodePrefix(node) {\r\n\t\t\treturn node.prefix;\r\n\t\t}\r\n\r\n\t\tfunction escapeXmlChars(str) {\r\n\t\t\tif(typeof(str) == \"string\")\r\n\t\t\t\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;');\r\n\t\t\telse\r\n\t\t\t\treturn str;\r\n\t\t}\r\n\r\n\t\tfunction unescapeXmlChars(str) {\r\n\t\t\treturn str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\").replace(/&amp;/g, '&');\r\n\t\t}\r\n\r\n\t\tfunction checkInStdFiltersArrayForm(stdFiltersArrayForm, obj, name, path) {\r\n\t\t\tvar idx = 0;\r\n\t\t\tfor(; idx < stdFiltersArrayForm.length; idx++) {\r\n\t\t\t\tvar filterPath = stdFiltersArrayForm[idx];\r\n\t\t\t\tif( typeof filterPath === \"string\" ) {\r\n\t\t\t\t\tif(filterPath == path)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\tif( filterPath instanceof RegExp) {\r\n\t\t\t\t\tif(filterPath.test(path))\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\tif( typeof filterPath === \"function\") {\r\n\t\t\t\t\tif(filterPath(obj, name, path))\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn idx!=stdFiltersArrayForm.length;\r\n\t\t}\r\n\r\n\t\tfunction toArrayAccessForm(obj, childName, path) {\r\n\t\t\tswitch(config.arrayAccessForm) {\r\n\t\t\t\tcase \"property\":\r\n\t\t\t\t\tif(!(obj[childName] instanceof Array))\r\n\t\t\t\t\t\tobj[childName+\"_asArray\"] = [obj[childName]];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tobj[childName+\"_asArray\"] = obj[childName];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t/*case \"none\":\r\n\t\t\t\t\tbreak;*/\r\n\t\t\t}\r\n\r\n\t\t\tif(!(obj[childName] instanceof Array) && config.arrayAccessFormPaths.length > 0) {\r\n\t\t\t\tif(checkInStdFiltersArrayForm(config.arrayAccessFormPaths, obj, childName, path)) {\r\n\t\t\t\t\tobj[childName] = [obj[childName]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fromXmlDateTime(prop) {\r\n\t\t\t// Implementation based up on http://stackoverflow.com/questions/8178598/xml-datetime-to-javascript-date-object\r\n\t\t\t// Improved to support full spec and optional parts\r\n\t\t\tvar bits = prop.split(/[-T:+Z]/g);\r\n\r\n\t\t\tvar d = new Date(bits[0], bits[1]-1, bits[2]);\r\n\t\t\tvar secondBits = bits[5].split(\"\\.\");\r\n\t\t\td.setHours(bits[3], bits[4], secondBits[0]);\r\n\t\t\tif(secondBits.length>1)\r\n\t\t\t\td.setMilliseconds(secondBits[1]);\r\n\r\n\t\t\t// Get supplied time zone offset in minutes\r\n\t\t\tif(bits[6] && bits[7]) {\r\n\t\t\t\tvar offsetMinutes = bits[6] * 60 + Number(bits[7]);\r\n\t\t\t\tvar sign = /\\d\\d-\\d\\d:\\d\\d$/.test(prop)? '-' : '+';\r\n\r\n\t\t\t\t// Apply the sign\r\n\t\t\t\toffsetMinutes = 0 + (sign == '-'? -1 * offsetMinutes : offsetMinutes);\r\n\r\n\t\t\t\t// Apply offset and local timezone\r\n\t\t\t\td.setMinutes(d.getMinutes() - offsetMinutes - d.getTimezoneOffset())\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tif(prop.indexOf(\"Z\", prop.length - 1) !== -1) {\r\n\t\t\t\t\td = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds()));\r\n\t\t\t\t}\r\n\r\n\t\t\t// d is now a local time equivalent to the supplied time\r\n\t\t\treturn d;\r\n\t\t}\r\n\r\n\t\tfunction checkFromXmlDateTimePaths(value, childName, fullPath) {\r\n\t\t\tif(config.datetimeAccessFormPaths.length > 0) {\r\n\t\t\t\tvar path = fullPath.split(\"\\.#\")[0];\r\n\t\t\t\tif(checkInStdFiltersArrayForm(config.datetimeAccessFormPaths, value, childName, path)) {\r\n\t\t\t\t\treturn fromXmlDateTime(value);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tfunction checkXmlElementsFilter(obj, childType, childName, childPath) {\r\n\t\t\tif( childType == DOMNodeTypes.ELEMENT_NODE && config.xmlElementsFilter.length > 0) {\r\n\t\t\t\treturn checkInStdFiltersArrayForm(config.xmlElementsFilter, obj, childName, childPath);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction parseDOMChildren( node, path ) {\r\n\t\t\tif(node.nodeType == DOMNodeTypes.DOCUMENT_NODE) {\r\n\t\t\t\tvar result = new Object;\r\n\t\t\t\tvar nodeChildren = node.childNodes;\r\n\t\t\t\t// Alternative for firstElementChild which is not supported in some environments\r\n\t\t\t\tfor(var cidx=0; cidx <nodeChildren.length; cidx++) {\r\n\t\t\t\t\tvar child = nodeChildren.item(cidx);\r\n\t\t\t\t\tif(child.nodeType == DOMNodeTypes.ELEMENT_NODE) {\r\n\t\t\t\t\t\tvar childName = getNodeLocalName(child);\r\n\t\t\t\t\t\tresult[childName] = parseDOMChildren(child, childName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif(node.nodeType == DOMNodeTypes.ELEMENT_NODE) {\r\n\t\t\t\tvar result = new Object;\r\n\t\t\t\tresult.__cnt=0;\r\n\r\n\t\t\t\tvar nodeChildren = node.childNodes;\r\n\r\n\t\t\t\t// Children nodes\r\n\t\t\t\tfor(var cidx=0; cidx <nodeChildren.length; cidx++) {\r\n\t\t\t\t\tvar child = nodeChildren.item(cidx); // nodeChildren[cidx];\r\n\t\t\t\t\tvar childName = getNodeLocalName(child);\r\n\r\n\t\t\t\t\tif(child.nodeType!= DOMNodeTypes.COMMENT_NODE) {\r\n\t\t\t\t\t\tvar childPath = path+\".\"+childName;\r\n\t\t\t\t\t\tif (checkXmlElementsFilter(result,child.nodeType,childName,childPath)) {\r\n\t\t\t\t\t\t\tresult.__cnt++;\r\n\t\t\t\t\t\t\tif(result[childName] == null) {\r\n\t\t\t\t\t\t\t\tresult[childName] = parseDOMChildren(child, childPath);\r\n\t\t\t\t\t\t\t\ttoArrayAccessForm(result, childName, childPath);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif(result[childName] != null) {\r\n\t\t\t\t\t\t\t\t\tif( !(result[childName] instanceof Array)) {\r\n\t\t\t\t\t\t\t\t\t\tresult[childName] = [result[childName]];\r\n\t\t\t\t\t\t\t\t\t\ttoArrayAccessForm(result, childName, childPath);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t(result[childName])[result[childName].length] = parseDOMChildren(child, childPath);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Attributes\r\n\t\t\t\tfor(var aidx=0; aidx <node.attributes.length; aidx++) {\r\n\t\t\t\t\tvar attr = node.attributes.item(aidx); // [aidx];\r\n\t\t\t\t\tresult.__cnt++;\r\n\t\t\t\t\tresult[config.attributePrefix+attr.name]=attr.value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Node namespace prefix\r\n\t\t\t\tvar nodePrefix = getNodePrefix(node);\r\n\t\t\t\tif(nodePrefix!=null && nodePrefix!=\"\") {\r\n\t\t\t\t\tresult.__cnt++;\r\n\t\t\t\t\tresult.__prefix=nodePrefix;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(result[\"#text\"]!=null) {\r\n\t\t\t\t\tresult.__text = result[\"#text\"];\r\n\t\t\t\t\tif(result.__text instanceof Array) {\r\n\t\t\t\t\t\tresult.__text = result.__text.join(\"\\n\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//if(config.escapeMode)\r\n\t\t\t\t\t//\tresult.__text = unescapeXmlChars(result.__text);\r\n\t\t\t\t\tif(config.stripWhitespaces)\r\n\t\t\t\t\t\tresult.__text = result.__text.trim();\r\n\t\t\t\t\tdelete result[\"#text\"];\r\n\t\t\t\t\tif(config.arrayAccessForm==\"property\")\r\n\t\t\t\t\t\tdelete result[\"#text_asArray\"];\r\n\t\t\t\t\tresult.__text = checkFromXmlDateTimePaths(result.__text, childName, path+\".\"+childName);\r\n\t\t\t\t}\r\n\t\t\t\tif(result[\"#cdata-section\"]!=null) {\r\n\t\t\t\t\tresult.__cdata = result[\"#cdata-section\"];\r\n\t\t\t\t\tdelete result[\"#cdata-section\"];\r\n\t\t\t\t\tif(config.arrayAccessForm==\"property\")\r\n\t\t\t\t\t\tdelete result[\"#cdata-section_asArray\"];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( result.__cnt == 0 && config.emptyNodeForm==\"text\" ) {\r\n\t\t\t\t\tresult = '';\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\tif( result.__cnt == 1 && result.__text!=null  ) {\r\n\t\t\t\t\tresult = result.__text;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\tif( result.__cnt == 1 && result.__cdata!=null && !config.keepCData  ) {\r\n\t\t\t\t\tresult = result.__cdata;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\tif ( result.__cnt > 1 && result.__text!=null && config.skipEmptyTextNodesForObj) {\r\n\t\t\t\t\tif( (config.stripWhitespaces && result.__text==\"\") || (result.__text.trim()==\"\")) {\r\n\t\t\t\t\t\tdelete result.__text;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdelete result.__cnt;\r\n\r\n\t\t\t\tif( config.enableToStringFunc && (result.__text!=null || result.__cdata!=null )) {\r\n\t\t\t\t\tresult.toString = function() {\r\n\t\t\t\t\t\treturn (this.__text!=null? this.__text:'')+( this.__cdata!=null ? this.__cdata:'');\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif(node.nodeType == DOMNodeTypes.TEXT_NODE || node.nodeType == DOMNodeTypes.CDATA_SECTION_NODE) {\r\n\t\t\t\treturn node.nodeValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction startTag(jsonObj, element, attrList, closed) {\r\n\t\t\tvar resultStr = \"<\"+ ( (jsonObj!=null && jsonObj.__prefix!=null)? (jsonObj.__prefix+\":\"):\"\") + element;\r\n\t\t\tif(attrList!=null) {\r\n\t\t\t\tfor(var aidx = 0; aidx < attrList.length; aidx++) {\r\n\t\t\t\t\tvar attrName = attrList[aidx];\r\n\t\t\t\t\tvar attrVal = jsonObj[attrName];\r\n\t\t\t\t\tif(config.escapeMode)\r\n\t\t\t\t\t\tattrVal=escapeXmlChars(attrVal);\r\n\t\t\t\t\tresultStr+=\" \"+attrName.substr(config.attributePrefix.length)+\"=\";\r\n\t\t\t\t\tif(config.useDoubleQuotes)\r\n\t\t\t\t\t\tresultStr+='\"'+attrVal+'\"';\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresultStr+=\"'\"+attrVal+\"'\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!closed)\r\n\t\t\t\tresultStr+=\">\";\r\n\t\t\telse\r\n\t\t\t\tresultStr+=\"/>\";\r\n\t\t\treturn resultStr;\r\n\t\t}\r\n\r\n\t\tfunction endTag(jsonObj,elementName) {\r\n\t\t\treturn \"</\"+ (jsonObj.__prefix!=null? (jsonObj.__prefix+\":\"):\"\")+elementName+\">\";\r\n\t\t}\r\n\r\n\t\tfunction endsWith(str, suffix) {\r\n\t\t\treturn str.indexOf(suffix, str.length - suffix.length) !== -1;\r\n\t\t}\r\n\r\n\t\tfunction jsonXmlSpecialElem ( jsonObj, jsonObjField ) {\r\n\t\t\tif((config.arrayAccessForm==\"property\" && endsWith(jsonObjField.toString(),(\"_asArray\")))\r\n\t\t\t\t\t|| jsonObjField.toString().indexOf(config.attributePrefix)==0\r\n\t\t\t\t\t|| jsonObjField.toString().indexOf(\"__\")==0\r\n\t\t\t\t\t|| (jsonObj[jsonObjField] instanceof Function) )\r\n\t\t\t\treturn true;\r\n\t\t\telse\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction jsonXmlElemCount ( jsonObj ) {\r\n\t\t\tvar elementsCnt = 0;\r\n\t\t\tif(jsonObj instanceof Object ) {\r\n\t\t\t\tfor( var it in jsonObj  ) {\r\n\t\t\t\t\tif(jsonXmlSpecialElem ( jsonObj, it) )\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\telementsCnt++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn elementsCnt;\r\n\t\t}\r\n\r\n\t\tfunction checkJsonObjPropertiesFilter(jsonObj, propertyName, jsonObjPath) {\r\n\t\t\treturn config.jsonPropertiesFilter.length == 0\r\n\t\t\t\t|| jsonObjPath==\"\"\r\n\t\t\t\t|| checkInStdFiltersArrayForm(config.jsonPropertiesFilter, jsonObj, propertyName, jsonObjPath);\r\n\t\t}\r\n\r\n\t\tfunction parseJSONAttributes ( jsonObj ) {\r\n\t\t\tvar attrList = [];\r\n\t\t\tif(jsonObj instanceof Object ) {\r\n\t\t\t\tfor( var ait in jsonObj  ) {\r\n\t\t\t\t\tif(ait.toString().indexOf(\"__\")== -1 && ait.toString().indexOf(config.attributePrefix)==0) {\r\n\t\t\t\t\t\tattrList.push(ait);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn attrList;\r\n\t\t}\r\n\r\n\t\tfunction parseJSONTextAttrs ( jsonTxtObj ) {\r\n\t\t\tvar result =\"\";\r\n\r\n\t\t\tif(jsonTxtObj.__cdata!=null) {\r\n\t\t\t\tresult+=\"<![CDATA[\"+jsonTxtObj.__cdata+\"]]>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(jsonTxtObj.__text!=null) {\r\n\t\t\t\tif(config.escapeMode)\r\n\t\t\t\t\tresult+=escapeXmlChars(jsonTxtObj.__text);\r\n\t\t\t\telse\r\n\t\t\t\t\tresult+=jsonTxtObj.__text;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction parseJSONTextObject ( jsonTxtObj ) {\r\n\t\t\tvar result =\"\";\r\n\r\n\t\t\tif( jsonTxtObj instanceof Object ) {\r\n\t\t\t\tresult+=parseJSONTextAttrs ( jsonTxtObj );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tif(jsonTxtObj!=null) {\r\n\t\t\t\t\tif(config.escapeMode)\r\n\t\t\t\t\t\tresult+=escapeXmlChars(jsonTxtObj);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresult+=jsonTxtObj;\r\n\t\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction getJsonPropertyPath(jsonObjPath, jsonPropName) {\r\n\t\t\tif (jsonObjPath===\"\") {\r\n\t\t\t\treturn jsonPropName;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn jsonObjPath+\".\"+jsonPropName;\r\n\t\t}\r\n\r\n\t\tfunction parseJSONArray ( jsonArrRoot, jsonArrObj, attrList, jsonObjPath ) {\r\n\t\t\tvar result = \"\";\r\n\t\t\tif(jsonArrRoot.length == 0) {\r\n\t\t\t\tresult+=startTag(jsonArrRoot, jsonArrObj, attrList, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tfor(var arIdx = 0; arIdx < jsonArrRoot.length; arIdx++) {\r\n\t\t\t\t\tresult+=startTag(jsonArrRoot[arIdx], jsonArrObj, parseJSONAttributes(jsonArrRoot[arIdx]), false);\r\n\t\t\t\t\tresult+=parseJSONObject(jsonArrRoot[arIdx], getJsonPropertyPath(jsonObjPath,jsonArrObj));\r\n\t\t\t\t\tresult+=endTag(jsonArrRoot[arIdx],jsonArrObj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction parseJSONObject ( jsonObj, jsonObjPath ) {\r\n\t\t\tvar result = \"\";\r\n\r\n\t\t\tvar elementsCnt = jsonXmlElemCount ( jsonObj );\r\n\r\n\t\t\tif(elementsCnt > 0) {\r\n\t\t\t\tfor( var it in jsonObj ) {\r\n\r\n\t\t\t\t\tif(jsonXmlSpecialElem ( jsonObj, it) || (jsonObjPath!=\"\" && !checkJsonObjPropertiesFilter(jsonObj, it, getJsonPropertyPath(jsonObjPath,it))) )\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tvar subObj = jsonObj[it];\r\n\r\n\t\t\t\t\tvar attrList = parseJSONAttributes( subObj )\r\n\r\n\t\t\t\t\tif(subObj == null || subObj == undefined) {\r\n\t\t\t\t\t\tresult+=startTag(subObj, it, attrList, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif(subObj instanceof Object) {\r\n\r\n\t\t\t\t\t\tif(subObj instanceof Array) {\r\n\t\t\t\t\t\t\tresult+=parseJSONArray( subObj, it, attrList, jsonObjPath );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(subObj instanceof Date) {\r\n\t\t\t\t\t\t\tresult+=startTag(subObj, it, attrList, false);\r\n\t\t\t\t\t\t\tresult+=subObj.toISOString();\r\n\t\t\t\t\t\t\tresult+=endTag(subObj,it);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar subObjElementsCnt = jsonXmlElemCount ( subObj );\r\n\t\t\t\t\t\t\tif(subObjElementsCnt > 0 || subObj.__text!=null || subObj.__cdata!=null) {\r\n\t\t\t\t\t\t\t\tresult+=startTag(subObj, it, attrList, false);\r\n\t\t\t\t\t\t\t\tresult+=parseJSONObject(subObj, getJsonPropertyPath(jsonObjPath,it));\r\n\t\t\t\t\t\t\t\tresult+=endTag(subObj,it);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tresult+=startTag(subObj, it, attrList, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tresult+=startTag(subObj, it, attrList, false);\r\n\t\t\t\t\t\tresult+=parseJSONTextObject(subObj);\r\n\t\t\t\t\t\tresult+=endTag(subObj,it);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult+=parseJSONTextObject(jsonObj);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tthis.parseXmlString = function(xmlDocStr) {\r\n\t\t\tvar isIEParser = window.ActiveXObject || \"ActiveXObject\" in window;\r\n\t\t\tif (xmlDocStr === undefined) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tvar xmlDoc;\r\n\t\t\tif (window.DOMParser) {\r\n\t\t\t\tvar parser=new window.DOMParser();\r\n\t\t\t\tvar parsererrorNS = null;\r\n\t\t\t\t// IE9+ now is here\r\n\t\t\t\tif(!isIEParser) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tparsererrorNS = parser.parseFromString(\"INVALID\", \"text/xml\").getElementsByTagName(\"parsererror\")[0].namespaceURI;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(err) {\r\n\t\t\t\t\t\tparsererrorNS = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\txmlDoc = parser.parseFromString( xmlDocStr, \"text/xml\" );\r\n\t\t\t\t\tif( parsererrorNS!= null && xmlDoc.getElementsByTagNameNS(parsererrorNS, \"parsererror\").length > 0) {\r\n\t\t\t\t\t\t//throw new Error('Error parsing XML: '+xmlDocStr);\r\n\t\t\t\t\t\txmlDoc = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\txmlDoc = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// IE :(\r\n\t\t\t\tif(xmlDocStr.indexOf(\"<?\")==0) {\r\n\t\t\t\t\txmlDocStr = xmlDocStr.substr( xmlDocStr.indexOf(\"?>\") + 2 );\r\n\t\t\t\t}\r\n\t\t\t\txmlDoc=new ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\txmlDoc.async=\"false\";\r\n\t\t\t\txmlDoc.loadXML(xmlDocStr);\r\n\t\t\t}\r\n\t\t\treturn xmlDoc;\r\n\t\t};\r\n\r\n\t\tthis.asArray = function(prop) {\r\n\t\t\tif (prop === undefined || prop == null)\r\n\t\t\t\treturn [];\r\n\t\t\telse\r\n\t\t\tif(prop instanceof Array)\r\n\t\t\t\treturn prop;\r\n\t\t\telse\r\n\t\t\t\treturn [prop];\r\n\t\t};\r\n\r\n\t\tthis.toXmlDateTime = function(dt) {\r\n\t\t\tif(dt instanceof Date)\r\n\t\t\t\treturn dt.toISOString();\r\n\t\t\telse\r\n\t\t\tif(typeof(dt) === 'number' )\r\n\t\t\t\treturn new Date(dt).toISOString();\r\n\t\t\telse\r\n\t\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\tthis.asDateTime = function(prop) {\r\n\t\t\tif(typeof(prop) == \"string\") {\r\n\t\t\t\treturn fromXmlDateTime(prop);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn prop;\r\n\t\t};\r\n\r\n\t\tthis.xml2json = function (xmlDoc) {\r\n\t\t\treturn parseDOMChildren ( xmlDoc );\r\n\t\t};\r\n\r\n\t\tthis.xml_str2json = function (xmlDocStr) {\r\n\t\t\tvar xmlDoc = this.parseXmlString(xmlDocStr);\r\n\t\t\tif(xmlDoc!=null)\r\n\t\t\t\treturn this.xml2json(xmlDoc);\r\n\t\t\telse\r\n\t\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\tthis.json2xml_str = function (jsonObj) {\r\n\t\t\treturn parseJSONObject ( jsonObj, \"\" );\r\n\t\t};\r\n\r\n\t\tthis.json2xml = function (jsonObj) {\r\n\t\t\tvar xmlDocStr = this.json2xml_str (jsonObj);\r\n\t\t\treturn this.parseXmlString(xmlDocStr);\r\n\t\t};\r\n\r\n\t\tthis.getVersion = function () {\r\n\t\t\treturn VERSION;\r\n\t\t};\r\n\t}\r\n}))\r\n;var S2GNamespace = function (s) {\r\n    var ns = typeof window !== \"undefined\" && window !== null ? window : self;\r\n\r\n    var parts = s.split('.');\r\n    for (var i = 0; i < parts.length; ++i) {\r\n        ns[parts[i]] = ns[parts[i]] || {};\r\n        ns = ns[parts[i]];\r\n    }\r\n\r\n    return ns;\r\n};\r\n\r\nS2GNamespace('Autodesk.BIM360.Convert');\r\n\r\n(function (Namespace) {\r\n\r\n    class S2G {\r\n        constructor(options) {\r\n            this.options = Object.assign({}, options);\r\n            this.initialize();\r\n        }\r\n\r\n        initialize() {\r\n            this.x2js = new X2JS({stripWhitespaces : true});\r\n        }\r\n\r\n        parseSvgText(svgText) {\r\n            let featureList = [];\r\n\r\n            if (!svgText) {\r\n                return featureList;\r\n            }\r\n\r\n            let svg_object = this.x2js.xml_str2json(svgText);\r\n            if (!svg_object || !svg_object.svg) {\r\n                console.warn('Invalid SVG text.');\r\n                return featureList;\r\n            }\r\n\r\n            let svg_data = svg_object.svg;\r\n            let svg_props = this._getSvgProps(svg_data);\r\n\r\n            Object.keys(svg_data).map(function(key, index) {\r\n                switch (key) {\r\n                    case S2G.NodeTypes.Rectangle:\r\n                    case S2G.NodeTypes.Ellipse:\r\n                    case S2G.NodeTypes.Polygon:\r\n                    case S2G.NodeTypes.Polyline:\r\n                        let feature = new Namespace.S2GFeature(svg_props);\r\n                        feature.parse(key, svg_data[key]);\r\n                        featureList.push(feature);\r\n                        break;\r\n                }\r\n            }.bind(this));\r\n\r\n            return featureList;\r\n        }\r\n\r\n        _getSvgProps(svgData) {\r\n            let svgProps = {};\r\n            let svgMetadata = {};\r\n            Object.keys(svgData).map(function(key, index) {\r\n                switch (key) {\r\n                    case S2G.NodeTypes.Rectangle:\r\n                    case S2G.NodeTypes.Ellipse:\r\n                    case S2G.NodeTypes.Polygon:\r\n                    case S2G.NodeTypes.Polyline:\r\n                        // Ingore shape properties\r\n                        break;\r\n                    case S2G.NodeTypes.Metadata:\r\n                        svgMetadata = Object.assign({}, svgMetadata, svgData[key]);\r\n                        break;\r\n                    default:\r\n                        let descriptor = Object.getOwnPropertyDescriptor(svgData, key);\r\n                        Object.defineProperty(svgProps, key, descriptor);\r\n                        break;\r\n                }\r\n            });\r\n\r\n            return { svgProps, svgMetadata };\r\n        }\r\n    }\r\n\r\n    // Static attribute for S2G\r\n    S2G.NodeTypes = {\r\n        Rectangle: \"rect\",\r\n        Ellipse: \"ellipse\",\r\n        Polygon: \"polygon\",\r\n        Polyline: \"path\",\r\n        Metadata: \"metadata\"\r\n    };\r\n    Namespace.S2G = S2G;\r\n\r\n})(Autodesk.BIM360.Convert);\r\n;(function(Namespace){\r\n\r\n    class S2GShape {\r\n        constructor(type, coordinates) {\r\n            this.type = type;\r\n            this.coordinates = [...coordinates];\r\n        }\r\n\r\n        parse(svgData) {\r\n\r\n        }\r\n    }\r\n\r\n    Namespace.S2GShape = S2GShape;\r\n})(Autodesk.BIM360.Convert);\r\n;(function(Namespace){\r\n\r\n    class S2GRectangle extends Namespace.S2GShape {\r\n        constructor(coordinates){\r\n            super('Polygon', coordinates || []);\r\n        }\r\n\r\n        parse(svgData) {\r\n            let position = svgData.metadata.markup_element._position;\r\n            let size = svgData.metadata.markup_element._size;\r\n\r\n            let positions = position.split(' ');\r\n            positions.forEach(function(value, index, array) {\r\n                array[index] =  parseFloat(value, 10);\r\n            });\r\n\r\n            let sizes = size.split(' ')\r\n            sizes.map(function(value, index, array) {\r\n                array[index] = parseFloat(value, 10);\r\n            });\r\n\r\n            this.coordinates.push(this._generateCoordinates(positions, sizes));\r\n        }\r\n\r\n        _generateCoordinates(positions, sizes) {\r\n            let coordinates = [];\r\n\r\n            coordinates.push([positions[0], positions[1]]);\r\n            coordinates.push([positions[0] + sizes[0], positions[1]]);\r\n            coordinates.push([positions[0] + sizes[0], positions[1] - sizes[1]]);\r\n            coordinates.push([positions[0], positions[1] - sizes[1]]);\r\n            coordinates.push([positions[0], positions[1]]);\r\n\r\n            return coordinates;\r\n        }\r\n    }\r\n\r\n    Namespace.S2GRectangle = S2GRectangle;\r\n})(Autodesk.BIM360.Convert);\r\n;(function(Namespace){\r\n\r\n    class S2GFeature {\r\n        constructor(properties) {\r\n            this.type = 'Feature';\r\n            this.geometry = {};\r\n            this.properties = Object.assign({}, properties);\r\n        }\r\n\r\n        parse(type, shapeSvgData) {\r\n            // Insert node props\r\n            let node_props = this._getNodeProps(shapeSvgData);\r\n            this.properties = Object.assign(this.properties, node_props);\r\n\r\n            let geo_shape = this._getShapeInstance(type);\r\n            if (geo_shape) {\r\n                geo_shape.parse(shapeSvgData);\r\n                this.geometry = geo_shape;\r\n            }\r\n        }\r\n\r\n        _getShapeInstance(type) {\r\n            switch (type) {\r\n                case Namespace.S2G.NodeTypes.Rectangle:\r\n                    return new Namespace.S2GRectangle();\r\n                case Namespace.S2G.NodeTypes.Ellipse:\r\n                    console.warn('Unsupport shape: Ellipse');\r\n                    return null;\r\n                case Namespace.S2G.NodeTypes.Polygon:\r\n                    console.warn('Unsupport shape: Polygon');\r\n                    return null;\r\n                case Namespace.S2G.NodeTypes.Polyline:\r\n                    console.warn('Unsupport shape: Polyline');\r\n                    return null;\r\n            }\r\n        }\r\n\r\n        _getNodeProps(svgData) {\r\n            let metadata = Namespace.S2G.NodeTypes.Metadata;\r\n            let svgNodeProps = Object.assign({}, svgData);\r\n            delete svgNodeProps.metadata;\r\n\r\n            let svgNodeMetadata = Object.assign({}, svgData.metadata || {});;\r\n\r\n            return { svgNodeProps, svgNodeMetadata };\r\n        }\r\n    }\r\n\r\n    Namespace.S2GFeature = S2GFeature;\r\n\r\n})(Autodesk.BIM360.Convert);\r\n"]}